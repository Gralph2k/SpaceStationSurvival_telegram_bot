# -*- coding: utf-8 -*-
import random

# from sqlite3 import Time # –≠—Ç–æ—Ç –∏–º–ø–æ—Ä—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å
import time

test_mode = False


# –ò–≥—Ä–æ–∫
class Player:
    def __init__(self):
        self.health = 100
        self.hunger = 0
        self.thirst = 0
        self.radiation = 0
        self.infection = 0
        self.inventory = []
        self.weapon = None
        self.has_gasmask = False
        self.has_armor = False
        self.backpack_size = 5

    def is_alive(self):
        # –î–æ–±–∞–≤–∏–º –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –≥–æ–ª–æ–¥ –∏ –∂–∞–∂–¥—É –¥–ª—è –±–æ–ª—å—à–µ–π —è—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –ø—Ä–æ–∏–≥—Ä—ã—à–µ
        return (
            self.health > 0
            and self.infection < 100
            and self.radiation < 100
            and self.hunger < 100
            and self.thirst < 100
        )

    def inventory_limit(self):
        return self.backpack_size


# –ü—Ä–µ–¥–º–µ—Ç—ã
items = {
    "water": "–ë—É—Ç—ã–ª–∫–∞ –≤–æ–¥—ã",
    "food": "–ü–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫",
    "medkit": "–ê–ø—Ç–µ—á–∫–∞",
    "antivirus": "–ê–Ω—Ç–∏–≤–∏—Ä—É—Å–Ω—ã–π —à–ø—Ä–∏—Ü",
    "gasmask": "–ü—Ä–æ—Ç–∏–≤–æ–≥–∞–∑",
    "ammo": "–ü–∞—Ç—Ä–æ–Ω—ã",
    "pistol": "–ü–∏—Å—Ç–æ–ª–µ—Ç-–ø–ª–∞–∑–º–∞—Ç—Ä–æ–Ω",
    "armor": "–ë—Ä–æ–Ω—è",
    "big_backpack": "–ë–æ–ª—å—à–æ–π —Ä—é–∫–∑–∞–∫",
    # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á-–∫–∞—Ä—Ç—É –∫–∞–ø–∏—Ç–∞–Ω–∞ –∫–∞–∫ –ø—Ä–µ–¥–º–µ—Ç, –µ—Å–ª–∏ –∑–∞—Ö–æ—á–µ—Ç—Å—è —É—Å–ª–æ–∂–Ω–∏—Ç—å
    # "captain_keycard": "–ö–ª—é—á-–∫–∞—Ä—Ç–∞ –∫–∞–ø–∏—Ç–∞–Ω–∞"
}

# –ú–æ–Ω—Å—Ç—Ä—ã
monsters = [
    {
        "name": "–ú—É—Ç–∞–Ω—Ç-—Å—Ç–∞–ª–∫–µ—Ä",
        "health": 50,
        "full_health": 50,
        "damage": 15,
        "desc": "–í–¥—Ä—É–≥ –∏–∑ –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–æ–Ω–Ω–æ–π —à–∞—Ö—Ç—ã –≤—ã–ø–æ–ª–∑–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ ‚Äî –ø–∞—Ä–æ–¥–∏—è –Ω–∞ —á–µ–ª–æ–≤–µ–∫–∞, –µ–≥–æ –∫–æ–∂–∞ —á—ë—Ä–Ω–∞—è –∏ –ø–æ–∫—Ä—ã—Ç–∞ —è–∑–≤–∞–º–∏.",
    },
    {
        "name": "–†–∞–∑–¥—É—Ç—ã–π —É–∂–∞—Å",
        "health": 80,
        "full_health": 80,
        "damage": 25,
        "desc": "–ò–∑ —Ç—å–º—ã –Ω–∞ –≤–∞—Å –∏–¥–µ—Ç –æ–≥—Ä–æ–º–Ω–∞—è –∫–æ–ª—ã—à–∞—â–∞—è—Å—è –º–∞—Å—Å–∞ –≤ –æ–±—Ä—ã–≤–∫–∞—Ö –ª–µ—Ç–Ω–æ–≥–æ –∫–æ—Å—Ç—é–º–∞",
    },
    # --- –ù–æ–≤—ã–π –º–æ–Ω—Å—Ç—Ä ---
    {
        "name": "–ó–æ–º–±–∏-–∫–∞–ø–∏—Ç–∞–Ω",
        "health": 120,  # –°–¥–µ–ª–∞–µ–º –µ–≥–æ –ø–æ–∫—Ä–µ–ø—á–µ
        "full_health": 120,
        "damage": 30,  # –ò –ø–æ—Å–∏–ª—å–Ω–µ–µ
        "desc": "–£ —à—Ç—É—Ä–≤–∞–ª–∞ —Å—Ç–æ–∏—Ç —Ñ–∏–≥—É—Ä–∞ –≤ –∏—Å—Ç–ª–µ–≤—à–µ–π –∫–∞–ø–∏—Ç–∞–Ω—Å–∫–æ–π —Ñ–æ—Ä–º–µ. –û–Ω–∞ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è, –∏ –ø—É—Å—Ç—ã–µ –≥–ª–∞–∑–Ω–∏—Ü—ã —É—Å—Ç—Ä–µ–º–ª—è—é—Ç—Å—è –Ω–∞ –≤–∞—Å.",
    },
]

health_status = [
    {"share": 0, "status": "–º—ë—Ä—Ç–≤"},
    {"share": 0.25, "status": "–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –º—ë—Ä—Ç–≤"},
    {"share": 0.5, "status": "—Å–ª–∞–±"},
    {"share": 0.75, "status": "—Ä–∞–Ω–µ–Ω"},
]

# –õ–æ–∫–∞—Ü–∏–∏
locations = {
    "medbay": "–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –æ—Ç—Å–µ–∫",
    "engineering": "–ò–Ω–∂–µ–Ω–µ—Ä–Ω—ã–π —Ü–µ—Ö",
    "quarters": "–ñ–∏–ª—ã–µ –æ—Ç—Å–µ–∫–∏",
    "reactor": "–†–µ–∞–∫—Ç–æ—Ä–Ω—ã–π –±–ª–æ–∫",
    "laboratory": "–ì–ª–∞–≤–Ω–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è",
    "bridge": "–ú–æ—Å—Ç–∏–∫ –∫–æ—Ä–∞–±–ª—è",  # --- –ù–æ–≤–∞—è –ª–æ–∫–∞—Ü–∏—è ---
}

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–∫–∞ (–æ—Å—Ç–∞–≤–∏–º –∑–¥–µ—Å—å –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞)
player = Player()

# --- –§–ª–∞–≥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–±–µ–¥—ã –Ω–∞–¥ –∫–∞–ø–∏—Ç–∞–Ω–æ–º ---
captain_defeated = False
# --- –§–ª–∞–≥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–ø—ã—Ç–∫–∏ –≤–∑–ª–æ–º–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ ---
bridge_puzzle_attempted = False

# –ü–æ–¥—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏ (–ø–µ—Ä–µ–Ω–µ—Å–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤ play_game)
start_time = 0

# –ó–∞—Ä–∞–Ω–µ–µ –∑–∞–¥–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
predefined_inputs = iter(
    [
        "0",
        "2",
        "1",
        "1",
        "2",
        "3",
        "1",
        "0",
        "2",
        "2",
        "4",
        "2",
        "1",
        "1",
        "0",
        "2",
        "3",
        "2",
        "1",
        "2",
        "0",
        "1",
        "2",
        "4",
        "6",  # –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–π—Ç–∏ –Ω–∞ –º–æ—Å—Ç–∏–∫
        "1",
        "1",
        "1",
        "1",
        "1",  # –ë–æ–π —Å –∫–∞–ø–∏—Ç–∞–Ω–æ–º
        "1234",  # –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –¥–ª—è –∑–∞–≥–∞–¥–∫–∏
        "5",  # –ü–æ–π—Ç–∏ –≤ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é
        "1",
        "1",  # –û–±—ã—Å–∫, –±–æ–π
        "0",
        "3",  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ø—Ç–µ—á–∫—É
        "6",  # –°–Ω–æ–≤–∞ –Ω–∞ –º–æ—Å—Ç–∏–∫ (–¥–æ–ª–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ç–µ—Ä–º–∏–Ω–∞–ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)
        # ... –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ —à–∞–≥–æ–≤ ...
    ]
)


def safe_input(prompt):
    """–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–≤–æ–¥ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞."""
    try:
        if test_mode:
            # –î–æ–±–∞–≤–∏–º –Ω–µ–±–æ–ª—å—à—É—é –ø–∞—É–∑—É –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
            time.sleep(0.1)
            value = next(predefined_inputs)
            print(f"{prompt}{value}")
        else:
            value = input(prompt)
        return value.strip()  # –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã
    except StopIteration:
        # –ï—Å–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –≤–≤–æ–¥—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å, –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        # –ù–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç (0) –∏–ª–∏ –ø–æ–π—Ç–∏ –≤ –ø–µ—Ä–≤—É—é –ª–æ–∫–∞—Ü–∏—é (1)
        print(f"{prompt}1 (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–≤–æ–¥)")
        return "1"
    except EOFError:  # –û–±—Ä–∞–±–æ—Ç–∫–∞ Ctrl+D / –∫–æ–Ω—Ü–∞ —Ñ–∞–π–ª–∞
        print(f"{prompt}1 (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–≤–æ–¥ –ø—Ä–∏ EOF)")
        return "1"


def show_status():
    """–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∏–≥—Ä–æ–∫–∞ –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å."""
    print("------------------------------------")
    print(
        f"\n[–°–¢–ê–¢–£–°] –ó–¥–æ—Ä–æ–≤—å–µ: {player.health}% | –ñ–∞–∂–¥–∞: {player.thirst}% | –ì–æ–ª–æ–¥: {player.hunger}% | –†–∞–¥–∏–∞—Ü–∏—è: {player.radiation}% | –ò–Ω—Ñ–µ–∫—Ü–∏—è: {player.infection}%"
    )
    inventory_str = ", ".join(player.inventory) if player.inventory else "–ü—É—Å—Ç–æ"
    print(
        f"[–ò–ù–í–ï–ù–¢–ê–†–¨] ({len(player.inventory)}/{player.inventory_limit()}): {inventory_str}"
    )
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∫–∞–∂–µ–º —ç–∫–∏–ø–∏—Ä–æ–≤–∫—É
    equipped = []
    if player.weapon:
        equipped.append(player.weapon)
    if player.has_armor:
        equipped.append(items["armor"])
    if player.has_gasmask:
        equipped.append(items["gasmask"])
    if equipped:
        print(f"[–≠–ö–ò–ü–ò–†–û–í–ö–ê]: {', '.join(equipped)}")


def search_area(location_name):
    """–ò–≥—Ä–æ–∫ –æ–±—ã—Å–∫–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –ª–æ–∫–∞—Ü–∏—é."""
    print(f"\n–í—ã –æ–±—ã—Å–∫–∏–≤–∞–µ—Ç–µ –ª–æ–∫–∞—Ü–∏—é '{location_name}'...")
    # –®–∞–Ω—Å –Ω–∞–π—Ç–∏ —á—Ç–æ-—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ª–æ–∫–∞—Ü–∏–∏? –ü–æ–∫–∞ –Ω–µ—Ç.
    found_count = 0
    # –ò—â–µ–º 2 —Ä–∞–∑–∞ —Å —à–∞–Ω—Å–æ–º —É—Å–ø–µ—Ö–∞
    for _ in range(2):
        # –ë–∞–∑–æ–≤—ã–π —à–∞–Ω—Å –Ω–∞–π—Ç–∏ —á—Ç–æ-—Ç–æ
        if random.randint(1, 100) <= 60:  # 60% —à–∞–Ω—Å –Ω–∞–π—Ç–∏ —Ö–æ—Ç—å —á—Ç–æ-—Ç–æ –∑–∞ –ø–æ–ø—ã—Ç–∫—É
            possible_items = list(items.keys())
            # –£–º–µ–Ω—å—à–∏–º —à–∞–Ω—Å –Ω–∞–π—Ç–∏ –æ—Ä—É–∂–∏–µ/–±—Ä–æ–Ω—é/—Ä—é–∫–∑–∞–∫, –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ –µ—Å—Ç—å
            weights = [1] * len(possible_items)
            for i, item_key in enumerate(possible_items):
                if (
                    (item_key == "pistol" and player.weapon)
                    or (item_key == "gasmask" and player.has_gasmask)
                    or (item_key == "armor" and player.has_armor)
                    or (item_key == "big_backpack" and player.backpack_size > 5)
                ):
                    weights[i] = 0.1  # –°–∏–ª—å–Ω–æ —Ä–µ–∂–µ–º —à–∞–Ω—Å –¥—É–±–ª–∏–∫–∞—Ç–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞
                elif item_key in ["pistol", "armor", "big_backpack", "gasmask"]:
                    weights[i] = 0.5  # –†–µ–∂–µ–º —à–∞–Ω—Å –Ω–∞–π—Ç–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –≤ —Ü–µ–ª–æ–º
                elif item_key == "ammo" and not player.weapon:
                    weights[i] = 0.2  # –ú–µ–Ω—å—à–µ —à–∞–Ω—Å –Ω–∞–π—Ç–∏ –ø–∞—Ç—Ä–æ–Ω—ã –±–µ–∑ –æ—Ä—É–∂–∏—è

            # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –≤–µ—Å–∞, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ –≤—Å–µ –≤–µ—Å–∞ –Ω—É–ª–µ–≤—ã–µ
            if sum(weights) == 0:
                continue

            found_item_key = random.choices(possible_items, weights=weights, k=1)[0]

            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞
            if found_item_key == "gasmask":
                if not player.has_gasmask:
                    player.has_gasmask = True
                    print(f"–í—ã –Ω–∞—à–ª–∏: {items[found_item_key]} (–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–¥–µ—Ç)")
                    found_count += 1
                # else: # –ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å, –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ –∏–ª–∏ –Ω–∏—á–µ–≥–æ
                #     print("–í—ã –Ω–∞—à–ª–∏ –µ—â–µ –æ–¥–∏–Ω –ø—Ä–æ—Ç–∏–≤–æ–≥–∞–∑, –Ω–æ –≤–∞—à –µ—â–µ –≤ –ø–æ—Ä—è–¥–∫–µ.")
            elif found_item_key == "armor":
                if not player.has_armor:
                    player.has_armor = True
                    print(f"–í—ã –Ω–∞—à–ª–∏: {items[found_item_key]} (–ù–∞–¥–µ—Ç–æ)")
                    found_count += 1
            elif found_item_key == "big_backpack":
                if player.backpack_size == 5:
                    player.backpack_size = 10
                    print(
                        f"–í—ã –Ω–∞—à–ª–∏: {items[found_item_key]}! –¢–µ–ø–µ—Ä—å –≤–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –≤–º–µ—â–∞–µ—Ç –±–æ–ª—å—à–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤."
                    )
                    found_count += 1
            elif found_item_key == "pistol":
                if not player.weapon:
                    player.weapon = items[found_item_key]
                    print(f"–í—ã –Ω–∞—à–ª–∏ –æ—Ä—É–∂–∏–µ: {items[found_item_key]}!")
                    # –î–∞–¥–∏–º –Ω–µ–º–Ω–æ–≥–æ –ø–∞—Ç—Ä–æ–Ω–æ–≤ –ø—Ä–∏ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–∏ –ø–∏—Å—Ç–æ–ª–µ—Ç–∞
                    if len(player.inventory) < player.inventory_limit():
                        player.inventory.append(items["ammo"])
                        print("–í –∫–æ–º–ø–ª–µ–∫—Ç–µ –±—ã–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ç—Ä–æ–Ω–æ–≤.")
                    found_count += 1
            else:  # –û–±—ã—á–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
                if len(player.inventory) < player.inventory_limit():
                    player.inventory.append(items[found_item_key])
                    print(f"–í—ã –Ω–∞—à–ª–∏: {items[found_item_key]}")
                    found_count += 1
                else:
                    print(
                        f"–í—ã –Ω–∞—à–ª–∏ {items[found_item_key]}, –Ω–æ –Ω–µ—Ç –º–µ—Å—Ç–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ!"
                    )

    if found_count == 0:
        print("–ù–∏—á–µ–≥–æ —Ü–µ–Ω–Ω–æ–≥–æ –Ω–∞–π—Ç–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å.")


def random_encounter(location_name):
    """–®–∞–Ω—Å –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –º–æ–Ω—Å—Ç—Ä–∞ –≤ –ª–æ–∫–∞—Ü–∏–∏."""
    # –ù–∞ –º–æ—Å—Ç–∏–∫–µ –º–æ–Ω—Å—Ç—Ä–æ–≤ –Ω–µ—Ç (–∫—Ä–æ–º–µ –∫–∞–ø–∏—Ç–∞–Ω–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ)
    if location_name == locations["bridge"]:
        return

    # –®–∞–Ω—Å –≤—Å—Ç—Ä–µ—á–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ª–æ–∫–∞—Ü–∏–∏? –ü–æ–∫–∞ –Ω–µ—Ç.
    if random.randint(1, 100) <= 40:  # 40% —à–∞–Ω—Å –≤—Å—Ç—Ä–µ—á–∏
        monster_data = random.choice(
            [m for m in monsters if m["name"] != "–ó–æ–º–±–∏-–∫–∞–ø–∏—Ç–∞–Ω"]
        )  # –ò—Å–∫–ª—é—á–∞–µ–º –∫–∞–ø–∏—Ç–∞–Ω–∞ –∏–∑ —Å–ª—É—á–∞–π–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á
        # –ü–µ—Ä–µ–¥–∞–µ–º –∫–æ–ø–∏—é –¥–∞–Ω–Ω—ã—Ö –º–æ–Ω—Å—Ç—Ä–∞, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ä—Ç–∏—Ç—å —à–∞–±–ª–æ–Ω
        fight(monster_data.copy())


def get_monster_status(monster_health, monster_full_health):
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–æ–Ω—Å—Ç—Ä–∞ –ø–æ –µ–≥–æ –∑–¥–æ—Ä–æ–≤—å—é."""
    share = monster_health / monster_full_health
    if share <= 0:
        return health_status[0]["status"]  # –º—ë—Ä—Ç–≤
    if share <= 0.25:
        return health_status[1]["status"]  # –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –º—ë—Ä—Ç–≤
    if share <= 0.5:
        return health_status[2]["status"]  # —Å–ª–∞–±
    if share <= 0.75:
        return health_status[3]["status"]  # —Ä–∞–Ω–µ–Ω
    return "–∑–¥–æ—Ä–æ–≤"  # –ï—Å–ª–∏ –±–æ–ª—å—à–µ 75%


def fight(monster_instance):
    """
    –ü—Ä–æ—Ü–µ—Å—Å –±–æ—è —Å –º–æ–Ω—Å—Ç—Ä–æ–º.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: "win", "flee", "player_dead", "error".
    """
    print(
        f"\n{monster_instance['desc']}\n[–û–ü–ê–°–ù–û–°–¢–¨] –ù–∞ –≤–∞—Å –Ω–∞–ø–∞–¥–∞–µ—Ç {monster_instance['name']}!"
    )

    while monster_instance["health"] > 0 and player.is_alive():
        monster_status = get_monster_status(
            monster_instance["health"], monster_instance["full_health"]
        )
        print(
            f"–ó–¥–æ—Ä–æ–≤—å–µ –º–æ–Ω—Å—Ç—Ä–∞ ({monster_status}): {monster_instance['health']}/{monster_instance['full_health']}"
        )
        print(f"–í–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ: {player.health}%")

        action = safe_input("\n(1) –ê—Ç–∞–∫–æ–≤–∞—Ç—å  (2) –£–±–µ–∂–∞—Ç—å > ")

        if action == "1":
            # –ê—Ç–∞–∫–∞ –∏–≥—Ä–æ–∫–∞
            if player.weapon == items["pistol"]:
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø–∞—Ç—Ä–æ–Ω–æ–≤
                try:
                    ammo_index = player.inventory.index(items["ammo"])
                    player.inventory.pop(ammo_index)  # –¢—Ä–∞—Ç–∏–º –æ–¥–∏–Ω –ø–∞—Ç—Ä–æ–Ω
                    damage = random.randint(25, 40)  # –£–≤–µ–ª–∏—á–∏–º —É—Ä–æ–Ω –æ—Ç –ø–∏—Å—Ç–æ–ª–µ—Ç–∞
                    print("–í—ã —Å—Ç—Ä–µ–ª—è–µ—Ç–µ –∏–∑ –ø–ª–∞–∑–º–∞—Ç—Ä–æ–Ω–∞!")
                except ValueError:
                    print("–£ –≤–∞—Å –Ω–µ—Ç –ø–∞—Ç—Ä–æ–Ω–æ–≤! –ê—Ç–∞–∫—É–µ—Ç–µ –≤—Ä—É–∫–æ–ø–∞—à–Ω—É—é.")
                    damage = random.randint(5, 10)
            elif player.weapon:  # –î—Ä—É–≥–æ–µ –æ—Ä—É–∂–∏–µ (–µ—Å–ª–∏ –±—É–¥–µ—Ç)
                damage = random.randint(15, 25)  # –ü—Ä–∏–º–µ—Ä –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –æ—Ä—É–∂–∏—è
                print(f"–í—ã –∞—Ç–∞–∫—É–µ—Ç–µ —Å –ø–æ–º–æ—â—å—é {player.weapon}!")
            else:  # –†—É–∫–æ–ø–∞—à–Ω–∞—è –∞—Ç–∞–∫–∞
                damage = random.randint(5, 10)
                print("–í—ã –±—å–µ—Ç–µ –∫—É–ª–∞–∫–∞–º–∏!")

            monster_instance["health"] -= damage
            print(f"–í—ã –Ω–∞–Ω–µ—Å–ª–∏ {damage} —É—Ä–æ–Ω–∞.")
            if monster_instance["health"] <= 0:
                monster_status = get_monster_status(0, monster_instance["full_health"])
                print(f"–ú–æ–Ω—Å—Ç—Ä {monster_status}.")
                break  # –ú–æ–Ω—Å—Ç—Ä –ø–æ–±–µ–∂–¥–µ–Ω, –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞ –∞—Ç–∞–∫–∏ –º–æ–Ω—Å—Ç—Ä–∞
            else:
                monster_status = get_monster_status(
                    monster_instance["health"], monster_instance["full_health"]
                )
                print(f"–ú–æ–Ω—Å—Ç—Ä {monster_status}.")

        elif action == "2":
            # –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–±–µ–≥–∞
            escape_chance = 60  # –ë–∞–∑–æ–≤—ã–π —à–∞–Ω—Å 60%
            if random.randint(1, 100) <= escape_chance:
                print("–í—ã —É—Å–ø–µ—à–Ω–æ —Å–±–µ–∂–∞–ª–∏!")
                return "flee"
            else:
                print("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–±–µ–∂–∞—Ç—å!")
                # –ú–æ–Ω—Å—Ç—Ä –∞—Ç–∞–∫—É–µ—Ç –≤ –æ—Ç–≤–µ—Ç –ø–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –ø–æ–±–µ–≥–∞

        else:
            print("–ù–µ–≤–µ—Ä–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ.")
            continue  # –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å –¥–µ–π—Å—Ç–≤–∏—è –±–µ–∑ –∞—Ç–∞–∫–∏ –º–æ–Ω—Å—Ç—Ä–∞

        # –ê—Ç–∞–∫–∞ –º–æ–Ω—Å—Ç—Ä–∞ (–µ—Å–ª–∏ –æ–Ω –µ—â–µ –∂–∏–≤ –∏ –∏–≥—Ä–æ–∫ –Ω–µ —Å–±–µ–∂–∞–ª)
        if monster_instance["health"] > 0:
            hit = monster_instance["damage"]
            # –°–Ω–∏–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞ –æ—Ç –±—Ä–æ–Ω–∏
            if player.has_armor:
                reduction = 0.3  # –ë—Ä–æ–Ω—è –ø–æ–≥–ª–æ—â–∞–µ—Ç 30% —É—Ä–æ–Ω–∞
                hit = int(hit * (1 - reduction))
                print("–ë—Ä–æ–Ω—è –ø–æ–≥–ª–æ—Ç–∏–ª–∞ —á–∞—Å—Ç—å —É—Ä–æ–Ω–∞.")
            player.health -= hit
            player.health = max(0, player.health)  # –ó–¥–æ—Ä–æ–≤—å–µ –Ω–µ —É—Ö–æ–¥–∏—Ç –≤ –º–∏–Ω—É—Å
            print(f"{monster_instance['name']} –Ω–∞–Ω–æ—Å–∏—Ç –≤–∞–º {hit} —É—Ä–æ–Ω–∞!")
            if not player.is_alive():
                # –ó–¥–æ—Ä–æ–≤—å–µ –∏–≥—Ä–æ–∫–∞ —É–ø–∞–ª–æ –¥–æ 0 –∏–ª–∏ –Ω–∏–∂–µ
                print(f"–í–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ: {player.health}%")
                return "player_dead"  # –ò–≥—Ä–æ–∫ –ø–æ–≥–∏–±

    # –¶–∏–∫–ª –∑–∞–≤–µ—Ä—à–∏–ª—Å—è, –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    if monster_instance["health"] <= 0:
        print(f"\n–í—ã –ø–æ–±–µ–¥–∏–ª–∏ {monster_instance['name']}!")
        # --- –õ—É—Ç —Å –º–æ–Ω—Å—Ç—Ä–æ–≤ ---
        if monster_instance["name"] == "–ú—É—Ç–∞–Ω—Ç-—Å—Ç–∞–ª–∫–µ—Ä":
            if len(player.inventory) < player.inventory_limit():
                player.inventory.append(items["ammo"])
                print("–í—ã –Ω–∞—à–ª–∏ –ø–∞—Ç—Ä–æ–Ω—ã!")
        elif monster_instance["name"] == "–†–∞–∑–¥—É—Ç—ã–π —É–∂–∞—Å":
            if len(player.inventory) < player.inventory_limit():
                player.inventory.append(items["antivirus"])
                print("–í—ã –Ω–∞—à–ª–∏ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å–Ω—ã–π —à–ø—Ä–∏—Ü!")
        elif monster_instance["name"] == "–ó–æ–º–±–∏-–∫–∞–ø–∏—Ç–∞–Ω":
            print(
                "–° —Ç–µ–ª–∞ –∫–∞–ø–∏—Ç–∞–Ω–∞ –ø–∞–¥–∞–µ—Ç –∫–ª—é—á-–∫–∞—Ä—Ç–∞... –Ω–æ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤—Å–µ –µ—â–µ —Ç—Ä–µ–±—É–µ—Ç –∫–æ–¥."
            )
            # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–ø–∞–¥–µ–Ω–∏–µ –∫–ª—é—á-–∫–∞—Ä—Ç—ã –∫–∞–∫ –ø—Ä–µ–¥–º–µ—Ç–∞, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
            # if len(player.inventory) < player.inventory_limit():
            #     player.inventory.append(items["captain_keycard"])
            #     print("–í—ã –ø–æ–¥–æ–±—Ä–∞–ª–∏ –∫–ª—é—á-–∫–∞—Ä—Ç—É –∫–∞–ø–∏—Ç–∞–Ω–∞.")
        return "win"
    elif not player.is_alive():
        # –≠—Ç–æ—Ç —Å–ª—É—á–∞–π —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞, –Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ—Ç—ã
        return "player_dead"
    else:
        # –°—é–¥–∞ –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞—Å—Ç—å –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
        print("–û–®–ò–ë–ö–ê: –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Å–ª–µ –±–æ—è.")
        return "error"


def use_item():
    """–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è."""
    if not player.inventory:
        print("\n–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç!")
        return False  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º False, –µ—Å–ª–∏ –Ω–µ—á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

    print("\n–í–∞—à–∏ –ø—Ä–µ–¥–º–µ—Ç—ã:")
    for idx, item_name in enumerate(player.inventory):
        print(f"({idx}) {item_name}")
    print(f"({len(player.inventory)}) –û—Ç–º–µ–Ω–∞")

    while True:
        choice = safe_input("–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–º–µ—Ä –ø—Ä–µ–¥–º–µ—Ç–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–ª–∏ –æ—Ç–º–µ–Ω—ã: ")
        if choice.isdigit():
            choice_idx = int(choice)
            if 0 <= choice_idx < len(player.inventory):
                item_to_use = player.inventory.pop(
                    choice_idx
                )  # –£–¥–∞–ª—è–µ–º –∏ –ø–æ–ª—É—á–∞–µ–º –ø—Ä–µ–¥–º–µ—Ç
                print(f"\n–í—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏: {item_to_use}")
                # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
                if item_to_use == items["water"]:
                    player.thirst = max(
                        player.thirst - 40, 0
                    )  # –í–æ–¥–∞ —É—Ç–æ–ª—è–µ—Ç –∂–∞–∂–¥—É –ª—É—á—à–µ
                    print("–í—ã —É—Ç–æ–ª–∏–ª–∏ –∂–∞–∂–¥—É.")
                elif item_to_use == items["food"]:
                    player.hunger = max(
                        player.hunger - 40, 0
                    )  # –ï–¥–∞ —É—Ç–æ–ª—è–µ—Ç –≥–æ–ª–æ–¥ –ª—É—á—à–µ
                    print("–í—ã —É—Ç–æ–ª–∏–ª–∏ –≥–æ–ª–æ–¥.")
                elif item_to_use == items["medkit"]:
                    player.health = min(player.health + 50, 100)  # –ê–ø—Ç–µ—á–∫–∞ –ª–µ—á–∏—Ç –±–æ–ª—å—à–µ
                    print("–í—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –∑–¥–æ—Ä–æ–≤—å–µ.")
                elif item_to_use == items["antivirus"]:
                    player.infection = max(
                        player.infection - 60, 0
                    )  # –ê–Ω—Ç–∏–≤–∏—Ä—É—Å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ
                    print("–í—ã –∑–∞–º–µ–¥–ª–∏–ª–∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≤–∏—Ä—É—Å–∞.")
                elif item_to_use == items["ammo"]:
                    print(
                        "–ü–∞—Ç—Ä–æ–Ω—ã –Ω–µ–ª—å–∑—è '–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å' —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º. –û–Ω–∏ —Ç—Ä–∞—Ç—è—Ç—Å—è –ø—Ä–∏ —Å—Ç—Ä–µ–ª—å–±–µ."
                    )
                    player.inventory.insert(
                        choice_idx, item_to_use
                    )  # –í–µ—Ä–Ω—É—Ç—å –ø–∞—Ç—Ä–æ–Ω—ã –æ–±—Ä–∞—Ç–Ω–æ
                    return False  # –î–µ–π—Å—Ç–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
                # –î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
                else:
                    print("–≠—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é.")
                    player.inventory.insert(
                        choice_idx, item_to_use
                    )  # –í–µ—Ä–Ω—É—Ç—å –ø—Ä–µ–¥–º–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ
                    return False  # –î–µ–π—Å—Ç–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

                return True  # –ü—Ä–µ–¥–º–µ—Ç —É—Å–ø–µ—à–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω
            elif choice_idx == len(player.inventory):
                print("–û—Ç–º–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞.")
                return False  # –û—Ç–º–µ–Ω–∞
            else:
                print("–ù–µ–≤–µ—Ä–Ω—ã–π –Ω–æ–º–µ—Ä –ø—Ä–µ–¥–º–µ—Ç–∞.")
        else:
            print("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä.")


def progress_status():
    """–û–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º (–≥–æ–ª–æ–¥, –∂–∞–∂–¥–∞ –∏ —Ç.–¥.)."""
    # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –±–∞–∑–æ–≤—ã–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏
    player.hunger += random.randint(4, 7)
    player.thirst += random.randint(5, 8)
    player.hunger = min(player.hunger, 100)  # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º 100%
    player.thirst = min(player.thirst, 100)  # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º 100%

    # –®—Ç—Ä–∞—Ñ—ã –∑–∞ –≤—ã—Å–æ–∫–∏–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏
    if player.hunger >= 80:
        print("\n–í—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–∏–ª—å–Ω—ã–π –≥–æ–ª–æ–¥...")
        if player.hunger >= 100:
            print("–í—ã —É–º–∏—Ä–∞–µ—Ç–µ –æ—Ç –≥–æ–ª–æ–¥–∞!")
            player.health -= 15  # –ë–æ–ª—å—à–µ —É—Ä–æ–Ω–∞ –ø—Ä–∏ 100%
    if player.thirst >= 80:
        print("\n–í–∞—Å –º—É—á–∞–µ—Ç —Å–∏–ª—å–Ω–∞—è –∂–∞–∂–¥–∞...")
        if player.thirst >= 100:
            print("–í—ã —É–º–∏—Ä–∞–µ—Ç–µ –æ—Ç –∂–∞–∂–¥—ã!")
            player.health -= 15  # –ë–æ–ª—å—à–µ —É—Ä–æ–Ω–∞ –ø—Ä–∏ 100%

    # –í–ª–∏—è–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    if not player.has_gasmask:
        toxic_air_effect = random.randint(3, 6)
        print(f"\n–í—ã –¥—ã—à–∏—Ç–µ —Ç–æ–∫—Å–∏—á–Ω—ã–º –≤–æ–∑–¥—É—Ö–æ–º (+{toxic_air_effect}% –∏–Ω—Ñ–µ–∫—Ü–∏–∏).")
        player.infection += toxic_air_effect
        player.infection = min(player.infection, 100)
        if player.infection >= 100:
            print("–ò–Ω—Ñ–µ–∫—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞—Ö–≤–∞—Ç–∏–ª–∞ –≤–∞—à –æ—Ä–≥–∞–Ω–∏–∑–º!")
            player.health = 0  # –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Å–º–µ—Ä—Ç—å –æ—Ç –∏–Ω—Ñ–µ–∫—Ü–∏–∏

    rad_increase = random.randint(0, 4)
    if rad_increase > 0:
        print(f"–£—Ä–æ–≤–µ–Ω—å —Ä–∞–¥–∏–∞—Ü–∏–∏ –Ω–µ–º–Ω–æ–≥–æ –ø–æ–≤—ã—Å–∏–ª—Å—è (+{rad_increase}%).")
        player.radiation += rad_increase
        player.radiation = min(player.radiation, 100)
        if player.radiation >= 100:
            print("–í—ã –ø–æ–ª—É—á–∏–ª–∏ —Å–º–µ—Ä—Ç–µ–ª—å–Ω—É—é –¥–æ–∑—É —Ä–∞–¥–∏–∞—Ü–∏–∏!")
            player.health = 0  # –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Å–º–µ—Ä—Ç—å –æ—Ç —Ä–∞–¥–∏–∞—Ü–∏–∏

    player.health = max(0, player.health)  # –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –∑–¥–æ—Ä–æ–≤—å–µ –Ω–µ —É—à–ª–æ –≤ –º–∏–Ω—É—Å


def check_time():
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –≤—ã—à–ª–æ –ª–∏ –≤—Ä–µ–º—è –∏–≥—Ä—ã."""
    global start_time
    elapsed_time = time.time() - start_time
    time_limit = 600  # 10 –º–∏–Ω—É—Ç
    if elapsed_time > time_limit:
        print(f"\n–ü—Ä–æ—à–ª–æ {time_limit // 60} –º–∏–Ω—É—Ç...")
        print("–°–∏—Å—Ç–µ–º—ã –∂–∏–∑–Ω–µ–æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å—Ç–∞–Ω—Ü–∏–∏ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–∞–∑–∞–ª–∏!")
        return False  # –í—Ä–µ–º—è –≤—ã—à–ª–æ
    # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –≤—Ä–µ–º–µ–Ω–∏
    elif time_limit - elapsed_time < 60:  # –ú–µ–Ω—å—à–µ –º–∏–Ω—É—Ç—ã –æ—Å—Ç–∞–ª–æ—Å—å
        print(f"\n[–í–†–ï–ú–Ø] –û—Å—Ç–∞–ª–æ—Å—å –º–µ–Ω—å—à–µ –º–∏–Ω—É—Ç—ã!")

    return True  # –í—Ä–µ–º—è –µ—â–µ –µ—Å—Ç—å


# --- –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥–∞–¥–∫–∏ ---
def solve_bridge_puzzle():
    """
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–≥–∞–¥–∫—É —Å –∫–æ–¥–æ–º –Ω–∞ –º–æ—Å—Ç–∏–∫–µ.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç True, –µ—Å–ª–∏ —Ä–µ—à–µ–Ω–æ, –∏–Ω–∞—á–µ False.
    """
    global bridge_puzzle_attempted
    bridge_puzzle_attempted = True  # –û—Ç–º–µ—á–∞–µ–º –ø–æ–ø—ã—Ç–∫—É

    print("\n–í—ã –ø–æ–¥—Ö–æ–¥–∏—Ç–µ –∫ –≥–ª–∞–≤–Ω–æ–º—É —Ç–µ—Ä–º–∏–Ω–∞–ª—É –º–æ—Å—Ç–∏–∫–∞.")
    print("–ù–∞ —ç–∫—Ä–∞–Ω–µ –º–µ—Ä—Ü–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫–æ–¥–∞ –¥–æ—Å—Ç—É–ø–∞.")
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π 4-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥
    code = str(random.randint(1000, 9999))
    if test_mode:
        print(f"(DEBUG: –ö–æ–¥ —Å–∞–º–æ—É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è: {code})")  # –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∞

    # –î–∞–¥–∏–º –∏–≥—Ä–æ–∫—É 3 –ø–æ–ø—ã—Ç–∫–∏
    for attempt_num in range(3):
        remaining_attempts = 3 - attempt_num
        prompt = f"–í–≤–µ–¥–∏—Ç–µ 4-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ [{remaining_attempts} –ø–æ–ø—ã—Ç–∫{'–∞' if remaining_attempts==1 else '–∏'}]: "
        attempt = safe_input(prompt)

        if not attempt.isdigit() or len(attempt) != 4:
            print("–û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞. –ö–æ–¥ –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ 4 —Ü–∏—Ñ—Ä.")
            continue  # –ü–æ–ø—ã—Ç–∫–∞ –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è

        if attempt == code:
            print("\n[–ö–û–î –ü–†–ò–ù–Ø–¢]")
            print("–°–∏—Å—Ç–µ–º–∞ —Å–∞–º–æ—É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞! –°–∏—Ä–µ–Ω—ã –≤–∑–≤—ã–ª–∏!")
            print(
                "–£ –≤–∞—Å –µ—Å—Ç—å –Ω–µ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, —á—Ç–æ–±—ã –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ —Å–ø–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π –∫–∞–ø—Å—É–ª—ã!"
            )
            return True  # –£—Å–ø–µ—Ö
        else:
            print("[–î–û–°–¢–£–ü –û–¢–ö–õ–û–ù–ï–ù]")
            if remaining_attempts > 1:
                # –î–∞–¥–∏–º –ø–æ–¥—Å–∫–∞–∑–∫—É (–±–æ–ª—å—à–µ/–º–µ–Ω—å—à–µ)
                if int(attempt) < int(code):
                    print("–ü–æ–¥—Å–∫–∞–∑–∫–∞: –ó–∞–≥–∞–¥–∞–Ω–Ω—ã–π –∫–æ–¥ –±–æ–ª—å—à–µ.")
                else:
                    print("–ü–æ–¥—Å–∫–∞–∑–∫–∞: –ó–∞–≥–∞–¥–∞–Ω–Ω—ã–π –∫–æ–¥ –º–µ–Ω—å—à–µ.")
            else:
                print("–ü–æ–ø—ã—Ç–∫–∏ –∏—Å—á–µ—Ä–ø–∞–Ω—ã. –¢–µ—Ä–º–∏–Ω–∞–ª –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è!")

    return False  # –ü—Ä–æ–≤–∞–ª


def select_location():
    """
    –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–≥—Ä–æ–∫—É –≤—ã–±—Ä–∞—Ç—å –ª–æ–∫–∞—Ü–∏—é –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        - –ò–º—è –ª–æ–∫–∞—Ü–∏–∏ (str) –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞.
        - "WIN_BRIDGE" (str) –µ—Å–ª–∏ –∏–≥—Ä–∞ –≤—ã–∏–≥—Ä–∞–Ω–∞ –Ω–∞ –º–æ—Å—Ç–∏–∫–µ.
        - None –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ø—Ä–µ–¥–º–µ—Ç –∏–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ/–Ω–µ —É–¥–∞–ª–æ—Å—å.
    """
    global captain_defeated, bridge_puzzle_attempted  # –£–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –±—É–¥–µ–º –º–µ–Ω—è—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

    while True:
        print("\n–ö—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è?")
        # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–æ—Ä—Ç–µ–∂–µ–π (–∫–ª—é—á, –∏–º—è) –∏–∑ —Å–ª–æ–≤–∞—Ä—è –ª–æ–∫–∞—Ü–∏–π
        available_locations = list(locations.items())

        for idx, (key, name) in enumerate(available_locations):
            # –î–æ–±–∞–≤–∏–º –ø–æ–º–µ—Ç–∫—É –¥–ª—è –º–æ—Å—Ç–∏–∫–∞
            if key == "bridge":
                if not captain_defeated:
                    print(f"({idx+1}) {name} (–ü—É—Ç—å –ø—Ä–µ–≥—Ä–∞–∂–¥–µ–Ω!)")
                elif captain_defeated and not bridge_puzzle_attempted:
                    print(f"({idx+1}) {name} (–ü—É—Ç—å —Å–≤–æ–±–æ–¥–µ–Ω)")
                else:  # –ö–∞–ø–∏—Ç–∞–Ω –ø–æ–±–µ–∂–¥–µ–Ω, –ø–æ–ø—ã—Ç–∫–∞ –±—ã–ª–∞
                    print(f"({idx+1}) {name} (–¢–µ—Ä–º–∏–Ω–∞–ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)")
            else:
                print(f"({idx+1}) {name}")

        print("\n(0) –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è")
        choice = safe_input("–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ: ")

        if choice == "0":
            if use_item():
                return None  # –ü—Ä–µ–¥–º–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω, —Ö–æ–¥ –∑–∞—Å—á–∏—Ç–∞–Ω, –Ω–æ –ª–æ–∫–∞—Ü–∏—è –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
            else:
                continue  # –ù–µ—É–¥–∞—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –æ—Ç–º–µ–Ω–∞, –æ—Å—Ç–∞–µ–º—Å—è –≤ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞

        elif choice.isdigit():
            choice_idx = int(choice) - 1
            if 0 <= choice_idx < len(available_locations):
                loc_key, loc_name = available_locations[choice_idx]

                # --- –û—Å–æ–±–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –ú–æ—Å—Ç–∏–∫–∞ ---
                if loc_key == "bridge":
                    if not captain_defeated:
                        print(
                            f"\n–í—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å –ø—Ä–æ–π—Ç–∏ –Ω–∞ '{loc_name}', –Ω–æ –ø—É—Ç—å –ø—Ä–µ–≥—Ä–∞–∂–¥–∞–µ—Ç..."
                        )
                        # –ù–∞—Ö–æ–¥–∏–º –¥–∞–Ω–Ω—ã–µ –ó–æ–º–±–∏-–∫–∞–ø–∏—Ç–∞–Ω–∞
                        captain_monster_data = next(
                            (m for m in monsters if m["name"] == "–ó–æ–º–±–∏-–∫–∞–ø–∏—Ç–∞–Ω"), None
                        )
                        if not captain_monster_data:
                            print("–û–®–ò–ë–ö–ê –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò: –ó–æ–º–±–∏-–∫–∞–ø–∏—Ç–∞–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω!")
                            return None  # –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø–∞–¥–µ–Ω–∏–µ

                        # –ù–∞—á–∏–Ω–∞–µ–º –±–æ–π —Å –ö–û–ü–ò–ï–ô –¥–∞–Ω–Ω—ã—Ö –∫–∞–ø–∏—Ç–∞–Ω–∞
                        fight_result = fight(captain_monster_data.copy())

                        if fight_result == "win":
                            print(f"–ü—É—Ç—å –Ω–∞ '{loc_name}' —Å–≤–æ–±–æ–¥–µ–Ω.")
                            captain_defeated = True  # –û—Ç–º–µ—á–∞–µ–º –ø–æ–±–µ–¥—É
                            # –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–æ–±–µ–¥—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —Ä–µ—à–∏—Ç—å –∑–∞–≥–∞–¥–∫—É
                            if solve_bridge_puzzle():
                                return "WIN_BRIDGE"  # –°–∏–≥–Ω–∞–ª –ø–æ–±–µ–¥—ã –≤ –∏–≥—Ä–µ!
                            else:
                                # –ó–∞–≥–∞–¥–∫–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞, bridge_puzzle_attempted —É–∂–µ True
                                print(
                                    "–í—ã –Ω–µ —Å–º–æ–≥–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É. –ù—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å –¥—Ä—É–≥–æ–π –ø—É—Ç—å –∏–ª–∏ –∂–¥–∞—Ç—å..."
                                )
                                return None  # –û—Å—Ç–∞–µ–º—Å—è –≤ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏
                        elif fight_result == "flee":
                            print(f"–í—ã –æ—Ç—Å—Ç—É–ø–∏–ª–∏ –æ—Ç '{loc_name}'.")
                            return None  # –û—Å—Ç–∞–µ–º—Å—è –≤ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏
                        else:  # –ò–≥—Ä–æ–∫ –ø–æ–≥–∏–± –≤ –±–æ—é
                            # –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∏–≥—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç player.is_alive() == False
                            return None  # –û—Å—Ç–∞–µ–º—Å—è –≤ –º–µ–Ω—é (—Ö–æ—Ç—è –∏–≥—Ä–∞ —Å–∫–æ—Ä–æ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è)

                    elif captain_defeated and not bridge_puzzle_attempted:
                        # –ö–∞–ø–∏—Ç–∞–Ω –ø–æ–±–µ–∂–¥–µ–Ω, –Ω–æ –∑–∞–≥–∞–¥–∫—É –µ—â–µ –Ω–µ –ø—ã—Ç–∞–ª–∏—Å—å —Ä–µ—à–∏—Ç—å (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ –ø—Ä–∏ —Ç–µ–∫—É—â–µ–π –ª–æ–≥–∏–∫–µ, –Ω–æ –ø—É—Å—Ç—å –±—É–¥–µ—Ç)
                        print(f"\n–í—ã –≤—Ö–æ–¥–∏—Ç–µ –Ω–∞ '{loc_name}'. –ü—É—Ç—å —Å–≤–æ–±–æ–¥–µ–Ω.")
                        if solve_bridge_puzzle():
                            return "WIN_BRIDGE"
                        else:
                            print("–í—ã –Ω–µ —Å–º–æ–≥–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É.")
                            return None
                    else:  # –ö–∞–ø–∏—Ç–∞–Ω –ø–æ–±–µ–∂–¥–µ–Ω –∏ –ø–æ–ø—ã—Ç–∫–∞ —Ä–µ—à–µ–Ω–∏—è –∑–∞–≥–∞–¥–∫–∏ –±—ã–ª–∞
                        print(
                            f"\n–í—ã —Å–Ω–æ–≤–∞ –Ω–∞ '{loc_name}'. –¢–µ—Ä–º–∏–Ω–∞–ª —Å–∞–º–æ—É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω."
                        )
                        # –ù–∏—á–µ–≥–æ –±–æ–ª—å—à–µ –∑–¥–µ—Å—å —Å–¥–µ–ª–∞—Ç—å –Ω–µ–ª—å–∑—è
                        return None  # –û—Å—Ç–∞–µ–º—Å—è –≤ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞

                # --- –û–±—ã—á–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏ ---
                else:
                    print(f"\n–í—ã –Ω–∞–ø—Ä–∞–≤–∏–ª–∏—Å—å –≤ '{loc_name}'")
                    return loc_name  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–º—è –ª–æ–∫–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
            else:
                print("–ù–µ–≤–µ—Ä–Ω—ã–π –Ω–æ–º–µ—Ä –ª–æ–∫–∞—Ü–∏–∏!")
        else:
            print("–ù–µ–≤–µ—Ä–Ω—ã–π –≤–≤–æ–¥! –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä.")


def play_game():
    """–û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª."""
    global start_time, player, captain_defeated, bridge_puzzle_attempted  # –û–±—ä—è–≤–∏–º –∏–∑–º–µ–Ω—è–µ–º—ã–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    # –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –Ω–æ–≤–æ–π –∏–≥—Ä—ã
    player = Player()
    captain_defeated = False
    bridge_puzzle_attempted = False
    start_time = time.time()  # –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä

    # –°—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    print("\n" + "=" * 35)
    print("=== –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ —Å—Ç–∞–Ω—Ü–∏—é '–ì–µ–ª–∏–æ—Å-9' ===")
    print("=" * 35)
    print(
        """
–¢—å–º–∞.
–¢—ã –ø—Ä–∏—Ö–æ–¥–∏—à—å –≤ —Å–µ–±—è –≤ –∞–≤–∞—Ä–∏–π–Ω–æ–π –∫–∞–ø—Å—É–ª–µ. –í —É—à–∞—Ö –∑–≤–µ–Ω–∏—Ç.
–ù–∞ —è–∑—ã–∫–µ –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–≤–∫—É—Å. –° —Ç—Ä—É–¥–æ–º –æ—Ç–∫—Ä—ã–≤–∞–µ—à—å –≥–ª–∞–∑–∞ ‚Äî
–∞–≤–∞—Ä–∏–π–Ω—ã–µ –æ–≥–Ω–∏ –º–∏–≥–∞—é—Ç –∫—Ä–∞—Å–Ω—ã–º. –°—Ç–∞–Ω—Ü–∏—è '–ì–µ–ª–∏–æ—Å-9' –ª–µ–∂–∏—Ç –≤ –∞–≥–æ–Ω–∏–∏.
–¢–≤–æ–∏ –ª—ë–≥–∫–∏–µ —Å–∂–∏–º–∞—é—Ç—Å—è –æ—Ç –∑–ª–æ–≤–æ–Ω–Ω–æ–≥–æ, —Ç—è–∂—ë–ª–æ–≥–æ –≤–æ–∑–¥—É—Ö–∞.
–ì–¥–µ-—Ç–æ –≤–¥–∞–ª–µ–∫–µ —Å–ª—ã—à–∞—Ç—Å—è —Å—Ç—Ä–∞–Ω–Ω—ã–µ –∑–≤—É–∫–∏ ‚Äî –æ—Ç–¥–∞–ª—ë–Ω–Ω—ã–µ —Å—Ç–æ–Ω—ã
–∏–ª–∏ —Å–∫—Ä–µ–∂–µ—Ç –∫–æ–≥—Ç–µ–π –ø–æ –º–µ—Ç–∞–ª–ª—É... –¢–≤–æ—è —Ü–µ–ª—å - –≤—ã–∂–∏—Ç—å –∏ –Ω–∞–π—Ç–∏ —Å–ø–æ—Å–æ–± —Å–±–µ–∂–∞—Ç—å.
"""
    )

    location_result = None  # –•—Ä–∞–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–±–æ—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏

    # –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∏–≥—Ä—ã
    while player.is_alive():
        # 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
        if not check_time():
            break  # –í—Ä–µ–º—è –≤—ã—à–ª–æ, –∫–æ–Ω–µ—Ü –∏–≥—Ä—ã

        # 2. –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å
        show_status()

        # 3. –í—ã–±–æ—Ä –¥–µ–π—Å—Ç–≤–∏—è (–ª–æ–∫–∞—Ü–∏—è –∏–ª–∏ –ø—Ä–µ–¥–º–µ—Ç)
        location_result = (
            select_location()
        )  # –ú–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –∏–º—è –ª–æ–∫–∞—Ü–∏–∏, None –∏–ª–∏ "WIN_BRIDGE"

        # 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã–±–æ—Ä–∞
        if location_result == "WIN_BRIDGE":
            # –ü–æ–±–µ–¥–∞ —á–µ—Ä–µ–∑ –º–æ—Å—Ç–∏–∫! –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞.
            break
        elif location_result is None:
            # –ò–≥—Ä–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –ø—Ä–µ–¥–º–µ—Ç, —Å–±–µ–∂–∞–ª –∏–∑ –±–æ—è, –Ω–µ —Å–º–æ–≥ –≤–æ–π—Ç–∏ –Ω–∞ –º–æ—Å—Ç–∏–∫,
            # –Ω–µ —Ä–µ—à–∏–ª –∑–∞–≥–∞–¥–∫—É –∏–ª–∏ –æ—Ç–º–µ–Ω–∏–ª –¥–µ–π—Å—Ç–≤–∏–µ.
            # –õ–æ–∫–∞—Ü–∏—è –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, –Ω–æ –≤—Ä–µ–º—è –∏–¥–µ—Ç.
            print("\n–•–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è...")
            # –ü—Ä–æ–≥—Ä–µ—Å—Å —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤—Å–µ–≥–¥–∞, –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –∂–∏–≤
            progress_status()
            # –ü–∞—É–∑–∞ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
            time.sleep(1)
            continue  # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ —Ü–∏–∫–ª–∞ (—Å–Ω–æ–≤–∞ –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –∏ –≤—ã–±–æ—Ä)
        else:
            # –ò–≥—Ä–æ–∫ —É—Å–ø–µ—à–Ω–æ –≤—ã–±—Ä–∞–ª –∏ –≤–æ—à–µ–ª –≤ –æ–±—ã—á–Ω—É—é –ª–æ–∫–∞—Ü–∏—é
            current_location_name = location_result

            # 5. –î–µ–π—Å—Ç–≤–∏—è –≤ –ª–æ–∫–∞—Ü–∏–∏ (–µ—Å–ª–∏ –≤–æ—à–ª–∏)
            search_area(current_location_name)

            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∂–∏–≤ –ª–∏ –∏–≥—Ä–æ–∫ –ø–æ—Å–ª–µ –æ–±—ã—Å–∫–∞ (–º–∞–ª–æ –ª–∏ —á—Ç–æ)
            if not player.is_alive():
                break

            random_encounter(current_location_name)

            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∂–∏–≤ –ª–∏ –∏–≥—Ä–æ–∫ –ø–æ—Å–ª–µ –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –±–æ—è
            if not player.is_alive():
                break

            # 6. –ü—Ä–æ–≥—Ä–µ—Å—Å —Å—Ç–∞—Ç—É—Å–∞ (–≥–æ–ª–æ–¥, –∂–∞–∂–¥–∞ –∏ —Ç.–¥.)
            progress_status()

            # 7. –ü–∞—É–∑–∞ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —Ö–æ–¥–æ–º
            print("\n...")  # –ù–µ–±–æ–ª—å—à–æ–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–∞—É–∑—ã
            time.sleep(1)  # –ü–∞—É–∑–∞ –≤ 1 —Å–µ–∫—É–Ω–¥—É

    # --- –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã ---
    elapsed_time = time.time() - start_time
    print("\n" + "=" * 35)
    print("=== –ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê ===")
    print("=" * 35)

    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–∏—á–∏–Ω—É –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã
    if location_result == "WIN_BRIDGE" and player.is_alive():
        print("\n–°–∏—Ä–µ–Ω—ã –≤–æ—é—Ç! –¢–∞–π–º–µ—Ä —Å–∞–º–æ—É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è –∑–∞–ø—É—â–µ–Ω!")
        print("–í—ã –±–µ–∂–∏—Ç–µ –∫ —Å–ø–∞—Å–∞—Ç–µ–ª—å–Ω–æ–π –∫–∞–ø—Å—É–ª–µ –∏ –≤ –ø–æ—Å–ª–µ–¥–Ω—é—é —Å–µ–∫—É–Ω–¥—É —Å—Ç–∞—Ä—Ç—É–µ—Ç–µ...")
        print("–°—Ç–∞–Ω—Ü–∏—è '–ì–µ–ª–∏–æ—Å-9' –≤–∑—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–∑–∞–¥–∏ –≤–∞—Å —è—Ä–∫–æ–π –≤—Å–ø—ã—à–∫–æ–π!")
        print("\nüéâ –ü–û–ó–î–†–ê–í–õ–Ø–ï–ú –° –ü–û–ë–ï–î–û–ô! üéâ")
    elif not player.is_alive():
        print("\n–í—ã –Ω–µ —Å–º–æ–≥–ª–∏ –≤—ã–∂–∏—Ç—å –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ '–ì–µ–ª–∏–æ—Å-9'.")
        # –£—Ç–æ—á–Ω–∏–º –ø—Ä–∏—á–∏–Ω—É —Å–º–µ—Ä—Ç–∏
        if player.health <= 0:
            print("–ü—Ä–∏—á–∏–Ω–∞: –°–º–µ—Ä—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–Ω—ã.")
        # –ü—Ä–æ–≤–µ—Ä–∫–∏ –≥–æ–ª–æ–¥–∞/–∂–∞–∂–¥—ã/–∏–Ω—Ñ–µ–∫—Ü–∏–∏/—Ä–∞–¥–∏–∞—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –≤–Ω—É—Ç—Ä–∏ is_alive, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å—é–¥–∞ –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏
        elif player.hunger >= 100:
            print("–ü—Ä–∏—á–∏–Ω–∞: –°–º–µ—Ä—Ç—å –æ—Ç –≥–æ–ª–æ–¥–∞.")
        elif player.thirst >= 100:
            print("–ü—Ä–∏—á–∏–Ω–∞: –°–º–µ—Ä—Ç—å –æ—Ç –∂–∞–∂–¥—ã.")
        elif player.infection >= 100:
            print("–ü—Ä–∏—á–∏–Ω–∞: –ò–Ω—Ñ–µ–∫—Ü–∏—è –∑–∞—Ö–≤–∞—Ç–∏–ª–∞ –æ—Ä–≥–∞–Ω–∏–∑–º.")
        elif player.radiation >= 100:
            print("–ü—Ä–∏—á–∏–Ω–∞: –°–º–µ—Ä—Ç–µ–ª—å–Ω–∞—è –¥–æ–∑–∞ —Ä–∞–¥–∏–∞—Ü–∏–∏.")
        else:
            print(
                "–ü—Ä–∏—á–∏–Ω–∞: –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞ (–≤–æ–∑–º–æ–∂–Ω–æ, –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ñ–∞–∫—Ç–æ—Ä–æ–≤)."
            )  # –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
        print("\nüíÄ –ö–û–ù–ï–¶ –ò–ì–†–´ üíÄ")
    elif elapsed_time > 600:  # –í—Ä–µ–º—è –≤—ã—à–ª–æ, –Ω–æ –∏–≥—Ä–æ–∫ –µ—â–µ –∂–∏–≤
        print("\n–í—Ä–µ–º—è –≤—ã—à–ª–æ! –°–∏—Å—Ç–µ–º—ã –∂–∏–∑–Ω–µ–æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ—Ç–∫–∞–∑–∞–ª–∏ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ.")
        print("–í—ã –Ω–µ —Å–º–æ–≥–ª–∏ –Ω–∞–π—Ç–∏ —Å–ø–æ—Å–æ–± —Å–ø–∞—Å—Ç–∏—Å—å –≤–æ–≤—Ä–µ–º—è.")
        print("\nüíÄ –ö–û–ù–ï–¶ –ò–ì–†–´ üíÄ")
    else:
        # –°—é–¥–∞ –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞—Å—Ç—å, –Ω–æ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
        print("\n–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –ø–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø—Ä–∏—á–∏–Ω–µ.")

    print(f"–í—Ä–µ–º—è –≤—ã–∂–∏–≤–∞–Ω–∏—è: {int(elapsed_time)} —Å–µ–∫—É–Ω–¥.")
    print("=" * 35)


# –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
if __name__ == "__main__":
    # test_mode = True # –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –ø–æ predefined_inputs
    play_game()
